## Vulnerability Details
- A vulnerabilidade principal está na ordem das operações durante o cálculo e distribuição das taxas. Especificamente :
Primeiro, calcula-se a taxa (fee) baseada no totalSupply
Depois aumenta-se o totalSupply adicionando a taxa
Por fim, distribui-se a taxa usando o novo totalSupply (já aumentado) para calcular a proporção de cada usuário
O problema é que o totalSupply usado para calcular as shares individuais já inclui a taxa, o que resulta em uma distribuição incorreta. Isso pode ser explorado porque :
```solidity
function executeTrade(uint256 tradeAmount) external {
    // ... código anterior ...

    // Problema 1: Calcula fee baseado no totalSupply atual
   uint256 fee = (totalSupply * DISCOUNT_FEE_PERCENTAGE) / 100;
    // Problema 2: Aumenta totalSupply ANTES da distribuição
   totalSupply += fee;  // <- Aqui aumenta o totalSupply
    // Problema 3: Usa o totalSupply já aumentado para calcular as shares
   for (uint256 i = 0; i < 5; i++) {
       address user = address(uint160(i + 1));
       uint256 userShare = (fee * balances[user]) / totalSupply;  // <- Usa totalSupply já aumentado
       balances[user] += userShare;
   }
```

**Exemplo Prático :**
  - Vamos considerar um cenário com números :
    - totalSupply inicial = 1000 tokens
    - DISCOUNT_FEE_PERCENTAGE = 10%
    - Usuário A tem 500 tokens (50%)
    - Usuário B tem 500 tokens (50%)
  - Como deveria funcionar (corretamente) :
    1. [Fee = 100]
    2. Distribuição para Usuário A = (100*500)/1000 = 50 tokens
    3. Distribuição para Usuário B = (100*500)/1000 = 50 tokens
    4. Total distribuído = 100 tokens
  - Como funciona com a vulnerabilidade :
    - [Fee = 100]
    - totalSupply é aumentado para 1100 tokens (1000 + 100) `totalSupply += fee;`
    - Distribuição para Usuário A = 100*(500/1100) = 45.45 tokens
    - Distribuição para Usuário B = (100*500)/1100 = 45.45 tokens
    - Total distribuído = 90.90 tokens

## Impacts
1. Perda de Tokens
  - Os usuários recebem menos tokens do que deveriam
  - No exemplo acima, ~9.1 tokens "desaparecem" do sistema
  - Quanto maior o totalSupply, maior a discrepância
2. Distribuição Desproporcional
  - A proporção de distribuição é distorcida
  - Usuários recebem menos do que sua participação real justificaria
  - O problema se agrava com múltiplas chamadas da função